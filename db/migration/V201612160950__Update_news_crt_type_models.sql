CREATE COLUMN TABLE "CART_REQUEST_TOOL"."READ_NEWS"
(
	READ_NEWS_ID BIGINT NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	USER_ID BIGINT NOT NULL,
	NEWS_ID BIGINT NOT NULL,
	
	CREATED_DATE_TZ TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	MODIFIED_DATE_TZ TIMESTAMP,
	CREATED_USER_ID BIGINT NOT NULL,
	MODIFIED_USER_ID BIGINT,
	ENABLED TINYINT DEFAULT 1, 
	DELETED TINYINT DEFAULT 0
);
ALTER TABLE "CART_REQUEST_TOOL"."READ_NEWS" ADD FOREIGN KEY ( "USER_ID" ) REFERENCES "CART_REQUEST_TOOL"."USER" ("USER_ID") ON UPDATE RESTRICT ON DELETE RESTRICT
;
ALTER TABLE "CART_REQUEST_TOOL"."READ_NEWS" ADD FOREIGN KEY ( "NEWS_ID" ) REFERENCES "CART_REQUEST_TOOL"."NEWS" ("NEWS_ID") ON UPDATE RESTRICT ON DELETE RESTRICT
;

alter table "CART_REQUEST_TOOL"."NEWS" add ("ATTACHMENT_ID" BIGINT null);
alter table "CART_REQUEST_TOOL"."CRT_TYPE" add ("DATA_PROTECTION" TINYINT null DEFAULT 0);

-- *************************************************************************************
-- Update schema version
INSERT INTO SCHEMA_VERSION(VERSION, DESCRIPTION, SCRIPT) 
VALUES('V2.0.0-06', 'Create read_model table to support unread news and update news and crt_type model', 'V201612160950__Update_news_crt_type_models.sql');

COMMIT;