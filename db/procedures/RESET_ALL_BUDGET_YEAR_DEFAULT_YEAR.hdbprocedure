PROCEDURE "CART_REQUEST_TOOL"."xscartrequesttool.db.procedures::RESET_ALL_BUDGET_YEAR_DEFAULT_YEAR" (
	IN in_user_id BIGINT,
	IN in_budget_year_id BIGINT,
	OUT out_result INTEGER
	) 
	LANGUAGE SQLSCRIPT
	SQL SECURITY INVOKER AS
BEGIN
	UPDATE "CART_REQUEST_TOOL"."BUDGET_YEAR" SET
        "CART_REQUEST_TOOL"."BUDGET_YEAR"."DEFAULT_YEAR" = 0,
        "CART_REQUEST_TOOL"."BUDGET_YEAR"."MODIFIED_USER_ID" = in_user_id,
        "CART_REQUEST_TOOL"."BUDGET_YEAR"."MODIFIED_DATE_TZ" = CURRENT_TIMESTAMP
	WHERE "CART_REQUEST_TOOL"."BUDGET_YEAR"."BUDGET_YEAR_ID" != in_budget_year_id;

	SELECT ::ROWCOUNT INTO out_result FROM DUMMY;
END;